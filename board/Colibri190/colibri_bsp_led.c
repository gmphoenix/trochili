/*************************************************************************************************
 *                                     Trochili RTOS Kernel                                      *
 *                                  Copyright(C) 2016 LIUXUMING                                  *
 *                                       www.trochili.com                                        *
 *************************************************************************************************/
#include "gd32f1x0.h"
#include "colibri_bsp_led.h"

/*************************************************************************************************
 *  功能：初始化用户Led设备                                                                      *
 *  参数：无                                                                                     *
 *  返回：无                                                                                     *
 *  说明：                                                                                       *
 *************************************************************************************************/
void EvbLedConfig(void)
{
    GPIO_InitPara GPIO_InitStructure;
	
	    /* Enable the LED Clock */
    RCC_AHBPeriphClock_Enable(RCC_AHBPERIPH_GPIOB,ENABLE);

    /* Configure the LED pin */
    GPIO_InitStructure.GPIO_Pin = GPIO_PIN_8 | GPIO_PIN_9|GPIO_PIN_10;
    GPIO_InitStructure.GPIO_Mode = GPIO_MODE_OUT;
    GPIO_InitStructure.GPIO_OType = GPIO_OTYPE_PP;
    GPIO_InitStructure.GPIO_PuPd = GPIO_PUPD_NOPULL;
    GPIO_InitStructure.GPIO_Speed = GPIO_SPEED_50MHZ;
    GPIO_Init(GPIOB,&GPIO_InitStructure);
}



/*************************************************************************************************
 *  功能：控制Led的点亮和熄灭                                                                    *
 *  参数：(1) index Led灯编号                                                                    *
 *        (2) cmd   Led灯点亮或者熄灭的命令                                                      *
 *  返回：无                                                                                     *
 *  说明：                                                                                       *
 *************************************************************************************************/
void EvbLedControl(int index, int cmd)
{
    switch (index)
    {
        case LED1:
        {
            if (cmd == LED_ON)
            {
                GPIO_SetBits(GPIOB,GPIO_PIN_8);  /*点亮Led1灯*/
            }
            else
            {
                GPIO_ResetBits(GPIOB,GPIO_PIN_8);  /*熄灭Led1灯*/
            }
            break;
        }
        case LED2:
        {
            if (cmd == LED_ON)
            {
                GPIO_SetBits(GPIOB,GPIO_PIN_9);  /*点亮Led2灯*/
            }
            else
            {
                GPIO_ResetBits(GPIOB,GPIO_PIN_9);  /*熄灭Led2灯*/
            }
            break;
        }
        case LED3:
        {
            if (cmd == LED_ON)
            {
                GPIO_SetBits(GPIOB,GPIO_PIN_10);  /*点亮Led3灯*/
            }
            else
            {
                GPIO_ResetBits(GPIOB,GPIO_PIN_10);  /*熄灭Led3灯*/
            }
            break;
        }
        default:
        {
            if (cmd == LED_ON)
            {
                GPIO_SetBits(GPIOB,GPIO_PIN_8|GPIO_PIN_9|GPIO_PIN_10); /*点亮所有的灯*/
            }
            else
            {
                GPIO_ResetBits(GPIOB,GPIO_PIN_8|GPIO_PIN_9|GPIO_PIN_10); /*熄灭所有的灯*/
            }
            break;
        }
    }
}

